<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>ACS Bluetooth iOS/Mac OS X Library: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ACS Bluetooth iOS/Mac OS X Library
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ACS Bluetooth iOS/Mac OS X Library Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>This library provides classes and protocols for communicating with ACS Bluetooth readers on iOS (5.0 or above) and Mac OS X (10.7 or above).</p>
<p>To use the library on iOS, your app must include <code>CoreBluetooth</code> header file from iOS SDK and <code>ACSBluetooth</code> header file.</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  MYViewController.m</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#import &quot;MYViewController.h&quot;</span></div>
<div class="line"><span class="preprocessor">#import &lt;CoreBluetooth/CoreBluetooth.h&gt;</span></div>
<div class="line"><span class="preprocessor">#import &lt;<a class="code" href="_a_c_s_bluetooth_8h.html">ACSBluetooth/ACSBluetooth.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">@interface </span>MYViewController () &lt;CBCentralManagerDelegate, <a class="code" href="protocol_a_b_t_bluetooth_reader_manager_delegate-p.html">ABTBluetoothReaderManagerDelegate</a>, <a class="code" href="protocol_a_b_t_bluetooth_reader_delegate-p.html">ABTBluetoothReaderDelegate</a>&gt;</div>
<div class="line"></div>
<div class="line"><span class="keyword">@end</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">@implementation </span>MYViewController {</div>
<div class="line"></div>
<div class="line">    CBCentralManager *_centralManager;</div>
<div class="line">    CBPeripheral *_peripheral;</div>
<div class="line">    <a class="code" href="interface_a_b_t_bluetooth_reader_manager.html">ABTBluetoothReaderManager</a> *_bluetoothReaderManager;</div>
<div class="line">    <a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *_bluetoothReader;</div>
<div class="line"></div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void)viewDidLoad</div>
<div class="line">{</div>
<div class="line">    [<span class="keyword">super</span> viewDidLoad];</div>
<div class="line">    <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></div>
<div class="line"></div>
<div class="line">    ...</div>
<div class="line"></div>
<div class="line">    _centralManager = [[CBCentralManager alloc] initWithDelegate:self queue:nil];</div>
<div class="line">    _bluetoothReaderManager = [[<a class="code" href="interface_a_b_t_bluetooth_reader_manager.html">ABTBluetoothReaderManager</a> alloc] init];</div>
<div class="line">    _bluetoothReaderManager.<a class="code" href="interface_a_b_t_bluetooth_reader.html#a1221ef8c1e14fcd88e242def40c55dcd">delegate</a> = <span class="keyword">self</span>;</div>
<div class="line"></div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">...</div>
</div><!-- fragment --><p>To use the library on Mac OS X, your app must include <code>IOBluetooth</code> header file from Mac OS X SDK and <code>ACSBluetooth</code> header file.</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// MYAppDelegate.m</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#import &quot;MYAppDelegate.h&quot;</span></div>
<div class="line"><span class="preprocessor">#import &lt;IOBluetooth/IOBluetooth.h&gt;</span></div>
<div class="line"><span class="preprocessor">#import &lt;<a class="code" href="_a_c_s_bluetooth_8h.html">ACSBluetooth/ACSBluetooth.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">@interface </span>ABDAppDelegate () &lt;CBCentralManagerDelegate, <a class="code" href="protocol_a_b_t_bluetooth_reader_manager_delegate-p.html">ABTBluetoothReaderManagerDelegate</a>, <a class="code" href="protocol_a_b_t_bluetooth_reader_delegate-p.html">ABTBluetoothReaderDelegate</a>&gt;</div>
<div class="line"></div>
<div class="line"><span class="keyword">@end</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">@implementation </span>ABDAppDelegate {</div>
<div class="line"></div>
<div class="line">    CBCentralManager *_centralManager;</div>
<div class="line">    CBPeripheral *_peripheral;</div>
<div class="line">    <a class="code" href="interface_a_b_t_bluetooth_reader_manager.html">ABTBluetoothReaderManager</a> *_bluetoothReaderManager;</div>
<div class="line">    <a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *_bluetoothReader;</div>
<div class="line"></div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void)applicationDidFinishLaunching:(NSNotification *)aNotification</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Insert code here to initialize your application</span></div>
<div class="line">    _centralManager = [[CBCentralManager alloc] initWithDelegate:self queue:nil];</div>
<div class="line">    _bluetoothReaderManager = [[<a class="code" href="interface_a_b_t_bluetooth_reader_manager.html">ABTBluetoothReaderManager</a> alloc] init];</div>
<div class="line">    _bluetoothReaderManager.<a class="code" href="interface_a_b_t_bluetooth_reader.html#a1221ef8c1e14fcd88e242def40c55dcd">delegate</a> = <span class="keyword">self</span>;</div>
<div class="line"></div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">...</div>
</div><!-- fragment --><p>Your app must create <code>CBCentralManager</code> and <a class="el" href="interface_a_b_t_bluetooth_reader_manager.html" title="The ABTBluetoothReaderManager class detects ACS Bluetooth readers. ">ABTBluetoothReaderManager</a> objects and then assign a delegate object to them. Therefore, your delegate object will receive the events from central manager and Bluetooth reader manager.</p>
<p>You must implement <code>centralManagerDidUpdateState:</code> method to check if Bluetooth low energy is supported and available to use.</p>
<div class="fragment"><div class="line">- (void)centralManagerDidUpdateState:(CBCentralManager *)central {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Check if Bluetooth low energy is supported and available to use.</span></div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="peripherals"></a>
Discovering peripherals</h1>
<p>You can discover peripherals by calling <code>scanForPeripheralsWithServices:options:</code> method of the <code>CBCentralManager</code> class.</p>
<div class="fragment"><div class="line">[_centralManager scanForPeripheralsWithServices:nil options:nil];</div>
</div><!-- fragment --><p>When the peripheral is discovered, the central manager calls <code>centralManager:didDiscoverPeripheral:advertisementData:RSSI:</code> method of its delegate object. You need to store the returned <code>CBPeripheral</code> object.</p>
<div class="fragment"><div class="line">- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Store the peripheral.</span></div>
<div class="line">    _peripheral = peripheral;</div>
<div class="line">}</div>
</div><!-- fragment --><p>When you have found the peripheral, you can stop the scanning for other devices to save the power.</p>
<div class="fragment"><div class="line">[_centralManager stopScan];</div>
</div><!-- fragment --><h1><a class="anchor" id="connect"></a>
Connecting to the peripheral</h1>
<p>After finding the peripheral, you can connect it by calling <code>connectPeripheral:options:</code> method of the <code>CBCentralManager</code> class.</p>
<div class="fragment"><div class="line">[_centralManager connectPeripheral:_peripheral options:nil];</div>
</div><!-- fragment --><p>If the connection is successful, the central manager will call <code>centralManager:didConnectPeripheral:</code> method of its delegate object. Otherwise, it will call <code>centralManager:didFailToConnectPeripheral:</code> method of its delegate object.</p>
<div class="fragment"><div class="line">- (void)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Detect the Bluetooth reader.</span></div>
<div class="line">    [_bluetoothReaderManager detectReaderWithPeripheral:peripheral];</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void)centralManager:(CBCentralManager *)central didFailToConnectPeripheral:(CBPeripheral *)peripheral error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Show the connection error.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="detect"></a>
Detecting the Bluetooth reader</h1>
<p>After the peripheral is connected, you can detect the Bluetooth reader by calling <a class="el" href="interface_a_b_t_bluetooth_reader_manager.html#a274499e2cfc9242c0b9987e496b88b68" title="Detects the reader with the peripheral. ">detectReaderWithPeripheral: (ABTBluetoothReaderManager)</a> method of the <a class="el" href="interface_a_b_t_bluetooth_reader_manager.html" title="The ABTBluetoothReaderManager class detects ACS Bluetooth readers. ">ABTBluetoothReaderManager</a> class. The Bluetooth reader manager calls <a class="el" href="protocol_a_b_t_bluetooth_reader_manager_delegate-p.html#a984f294bde6383bda3e008ffdff7e093" title="Invoked when the Bluetooth reader is detected. ">bluetoothReaderManager:didDetectReader:peripheral:error: (ABTBluetoothReaderManagerDelegate-p)</a> method of its delegate object to return the result.</p>
<div class="fragment"><div class="line">- (void)bluetoothReaderManager:(<a class="code" href="interface_a_b_t_bluetooth_reader_manager.html">ABTBluetoothReaderManager</a> *)bluetoothReaderManager didDetectReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)reader peripheral:(CBPeripheral *)peripheral error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (error != nil) {</div>
<div class="line"></div>
<div class="line">        <span class="comment">// TODO: Show the error.</span></div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Store the Bluetooth reader.</span></div>
<div class="line">        _bluetoothReader = reader;</div>
<div class="line">        _bluetoothReader.delegate = <span class="keyword">self</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Attach the peripheral to the Bluetooth reader.</span></div>
<div class="line">        [_bluetoothReader attachPeripheral:peripheral];</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="attach"></a>
Attaching the peripheral</h1>
<p>You can attach the peripheral by calling <a class="el" href="interface_a_b_t_bluetooth_reader.html#af276c7681598720fef558c92d1eebb23" title="Attaches the reader to the peripheral. ">attachPeripheral: (ABTBluetoothReader)</a> method of the <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> class. The Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#ae997a68e52d7fe3a4ccadbd924c1a732" title="Invoked when the Bluetooth reader attaches to the peripheral. ">bluetoothReader:didAttachPeripheral:error: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to return the result.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didAttachPeripheral:(CBPeripheral *)peripheral error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Show the error.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="detach"></a>
Detaching the peripheral</h1>
<p>If you have finished the operation with the Bluetooth reader, you can detach the peripheral by calling <a class="el" href="interface_a_b_t_bluetooth_reader.html#ae527fdd56830ef7795fc4448f55e3c46" title="Detaches the peripheral. ">detach (ABTBluetoothReader)</a> method of the <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> class.</p>
<div class="fragment"><div class="line">[_bluetoothReader detach];</div>
</div><!-- fragment --><h1><a class="anchor" id="disconnect"></a>
Disconnecting the peripheral</h1>
<p>If your Bluetooth reader is no longer used, you can disconnect the peripheral by calling <code>cancelPeripheralConnection:</code> method of the <code>CBCentralManager</code> class.</p>
<div class="fragment"><div class="line">[_centralManager cancelPeripheralConnection:_peripheral];</div>
</div><!-- fragment --><p>The central manager calls <code>centralManager:didDisconnectPeripheral:error:</code> of its delegate object.</p>
<div class="fragment"><div class="line">- (void)centralManager:(CBCentralManager *)central didDisconnectPeripheral:(CBPeripheral *)peripheral error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Show the error.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="deviceinfo"></a>
Getting the device information</h1>
<p>You can get the device information by calling <a class="el" href="interface_a_b_t_bluetooth_reader.html#aba727cc01975b9b45a9fd6e298889f9c" title="Gets the device information. ">getDeviceInfoWithType: (ABTBluetoothReader)</a> method of <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> class. If the device information is not supported, the method will returns <code>NO</code>.</p>
<div class="fragment"><div class="line">[_bluetoothReader getDeviceInfoWithType:<a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5abf2fb8dd7152193b00e29eb0b05ebc6f">ABTBluetoothReaderDeviceInfoSystemId</a>];</div>
<div class="line">[_bluetoothReader getDeviceInfoWithType:<a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5a0362cc08c8a4c8b9b144ea0bf248d467">ABTBluetoothReaderDeviceInfoModelNumberString</a>];</div>
<div class="line">[_bluetoothReader getDeviceInfoWithType:<a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5a4ebca92d6873d886e0c33f150bf2c8c8">ABTBluetoothReaderDeviceInfoSerialNumberString</a>];</div>
<div class="line">[_bluetoothReader getDeviceInfoWithType:<a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5a49dc91cf23d742fd972881c7eea6783e">ABTBluetoothReaderDeviceInfoFirmwareRevisionString</a>];</div>
<div class="line">[_bluetoothReader getDeviceInfoWithType:<a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5a58246683dbba2cc093d4e689aea58c06">ABTBluetoothReaderDeviceInfoHardwareRevisionString</a>];</div>
<div class="line">[_bluetoothReader getDeviceInfoWithType:<a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5ad24a60877e95fa9da4c1cf150d34fc27">ABTBluetoothReaderDeviceInfoManufacturerNameString</a>];</div>
</div><!-- fragment --><p>The Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#a36e3b0e2e1a49936fc0a0fed02364941" title="Invoked when the Bluetooth reader returns the device information. ">bluetoothReader:didReturnDeviceInfo:type:error: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to return the device information.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didReturnDeviceInfo:(NSObject *)deviceInfo type:(<a class="code" href="_a_b_t_bluetooth_reader_8h.html#a4fe1b3d48bd40fdcf7cfc33bd591b32a">ABTBluetoothReaderDeviceInfo</a>)type error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (error != nil) {</div>
<div class="line"></div>
<div class="line">        <span class="comment">// TODO: Show the error.</span></div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">switch</span> (type) {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5abf2fb8dd7152193b00e29eb0b05ebc6f">ABTBluetoothReaderDeviceInfoSystemId</a>:</div>
<div class="line">                <span class="comment">// TODO: Show the system ID.</span></div>
<div class="line">                <span class="comment">// ...</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5a0362cc08c8a4c8b9b144ea0bf248d467">ABTBluetoothReaderDeviceInfoModelNumberString</a>:</div>
<div class="line">                <span class="comment">// TODO: Show the model number.</span></div>
<div class="line">                <span class="comment">// ...</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5a4ebca92d6873d886e0c33f150bf2c8c8">ABTBluetoothReaderDeviceInfoSerialNumberString</a>:</div>
<div class="line">                <span class="comment">// TODO: Show the serial number.</span></div>
<div class="line">                <span class="comment">// ...</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5a49dc91cf23d742fd972881c7eea6783e">ABTBluetoothReaderDeviceInfoFirmwareRevisionString</a>:</div>
<div class="line">                <span class="comment">// TODO: Show the firmware revision.</span></div>
<div class="line">                <span class="comment">// ...</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5a58246683dbba2cc093d4e689aea58c06">ABTBluetoothReaderDeviceInfoHardwareRevisionString</a>:</div>
<div class="line">                <span class="comment">// TODO: Show the hardware revision.</span></div>
<div class="line">                <span class="comment">// ...</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="_a_b_t_bluetooth_reader_8h.html#a99fb83031ce9923c84392b4e92f956b5ad24a60877e95fa9da4c1cf150d34fc27">ABTBluetoothReaderDeviceInfoManufacturerNameString</a>:</div>
<div class="line">                <span class="comment">// TODO: Show the manufacturer name.</span></div>
<div class="line">                <span class="comment">// ...</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="acr3901us1"></a>
Working with ACR3901U-S1 reader</h1>
<p>If the ACR3901U-S1 reader is detected, the returned <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> object will be an instance of <a class="el" href="interface_a_b_t_acr3901us1_reader.html" title="The ABTAcr3901us1Reader class represents ACR3901U-S1 reader. ">ABTAcr3901us1Reader</a> class. To invoke the method, you can cast it as <a class="el" href="interface_a_b_t_acr3901us1_reader.html" title="The ABTAcr3901us1Reader class represents ACR3901U-S1 reader. ">ABTAcr3901us1Reader</a> object.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> ([_bluetoothReader isKindOfClass:[<a class="code" href="interface_a_b_t_acr3901us1_reader.html">ABTAcr3901us1Reader</a> <span class="keyword">class</span>]]) {</div>
<div class="line"></div>
<div class="line">    ABTAcr3901us1Reader *reader = (ABTAcr3901us1Reader *) _bluetoothReader;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Invoke the method.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="batterystatus"></a>
Getting the battery status</h2>
<p>If the battery status is changed, the Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#a610f162aef022b71c0c31fa82ae03254" title="Invoked when the Bluetooth reader changes the battery status. ">bluetoothReader:didChangeBatteryStatus:error: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to return the battery status.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didChangeBatteryStatus:(<a class="code" href="_a_b_t_bluetooth_reader_8h.html#a10b304ee820673d276690c6d03b6cefc">ABTBluetoothReaderBatteryStatus</a>)batteryStatus error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Process the battery status.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>If you want to get the battery status again, you can call <a class="el" href="interface_a_b_t_acr3901us1_reader.html#aab99d6c97a976674b73ab9a64b9899bf" title="Gets the battery status. ">getBatteryStatus (ABTAcr3901us1Reader)</a> method of <a class="el" href="interface_a_b_t_acr3901us1_reader.html" title="The ABTAcr3901us1Reader class represents ACR3901U-S1 reader. ">ABTAcr3901us1Reader</a> class.</p>
<div class="fragment"><div class="line">[reader getBatteryStatus];</div>
</div><!-- fragment --><h1><a class="anchor" id="acr1255uj1"></a>
Working with ACR1255U-J1 reader</h1>
<p>If the ACR1255U-J1 reader is detected, the returned <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> object will be an instance of <a class="el" href="interface_a_b_t_acr1255uj1_reader.html" title="The ABTAcr1255uj1Reader class represents ACR1255U-J1 reader. ">ABTAcr1255uj1Reader</a> class. To invoke the method, you can cast it as <a class="el" href="interface_a_b_t_acr1255uj1_reader.html" title="The ABTAcr1255uj1Reader class represents ACR1255U-J1 reader. ">ABTAcr1255uj1Reader</a> object.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> ([_bluetoothReader isKindOfClass:[<a class="code" href="interface_a_b_t_acr1255uj1_reader.html">ABTAcr1255uj1Reader</a> <span class="keyword">class</span>]]) {</div>
<div class="line"></div>
<div class="line">    ABTAcr1255uj1Reader *reader = (ABTAcr1255uj1Reader *) _bluetoothReader;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Invoke the method.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="batterylevel"></a>
Getting the battery level</h2>
<p>If the battery level is changed, the Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#a9d2822a52a1d2a937624c77b42022bb8" title="Invoked when the Bluetooth reader changes the battery level. ">bluetoothReader:didChangeBatteryLevel:error: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to return the battery level.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didChangeBatteryLevel:(NSUInteger)batteryLevel error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Process the battery level.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>If you want to get the battery level again, you can call <a class="el" href="interface_a_b_t_acr1255uj1_reader.html#a0326aed29006f73491a0f8be26d21468" title="Gets the battery level. ">getBatteryLevel (ABTAcr1255uj1Reader)</a> method of <a class="el" href="interface_a_b_t_acr1255uj1_reader.html" title="The ABTAcr1255uj1Reader class represents ACR1255U-J1 reader. ">ABTAcr1255uj1Reader</a> class.</p>
<div class="fragment"><div class="line">[reader getBatteryLevel];</div>
</div><!-- fragment --><h1><a class="anchor" id="authenticate"></a>
Authenticating the Bluetooth reader</h1>
<p>Before performing the operation, you must authenticate the Bluetooth reader by calling <a class="el" href="interface_a_b_t_bluetooth_reader.html#a51f95182d491934d946f8ce803849cca" title="Authenticates the reader. ">authenticateWithMasterKey: (ABTBluetoothReader)</a> method of <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> class with the master key.</p>
<div class="fragment"><div class="line">[reader authenticateWithMasterKey:_masterKey];</div>
</div><!-- fragment --><p>The Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#a7ced6c91f3f9443113e9c5c8d96289a6" title="Invoked when the Bluetooth reader is authenticated. ">bluetoothReader:didAuthenticateWithError: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to return the authentication result.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didAuthenticateWithError:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Show the error.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="poweron"></a>
Powering on the card</h1>
<p>If the Bluetooth reader is authenticated successfully, you can power on the card by calling <a class="el" href="interface_a_b_t_bluetooth_reader.html#ada320b8ccb71fa55c0a36a4e272c4209" title="Powers on the card. ">powerOnCard (ABTBluetoothReader)</a> method of <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> class.</p>
<div class="fragment"><div class="line">[_bluetoothReader powerOnCard];</div>
</div><!-- fragment --><p>The Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#a247b6ff8882278fe9da6ad86e4120e3d" title="Invoked when the Bluetooth reader returns the ATR string after powering on the card. ">bluetoothReader:didReturnAtr:error: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to return the ATR string.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didReturnAtr:(NSData *)atr error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Process the ATR string from the card.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="poweroff"></a>
Powering off the card</h1>
<p>If the Bluetooth reader is authenticated successfully, you can power off the card by calling <a class="el" href="interface_a_b_t_bluetooth_reader.html#a9a6877979b8b23a3662c0bf80b5aa87d" title="Powers off the card. ">powerOffCard (ABTBluetoothReader)</a> method of <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> class.</p>
<div class="fragment"><div class="line">[_bluetoothReader powerOffCard];</div>
</div><!-- fragment --><p>The Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#a18fbe85a8fdfd0a71e3ed2a7cd77a92a" title="Invoked when the Bluetooth reader powers off the card. ">bluetoothReader:didPowerOffCardWithError: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to notify the result.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didPowerOffCardWithError:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Show the error.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="cardstatus"></a>
Getting the card status</h1>
<p>If the Bluetooth reader is authenticated successfully, you can get the card status by calling <a class="el" href="interface_a_b_t_bluetooth_reader.html#aff111e5164b3681c30720b5729353ab6" title="Gets the card status. ">getCardStatus (ABTBluetoothReader)</a> method of <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> class.</p>
<div class="fragment"><div class="line">[_bluetoothReader getCardStatus];</div>
</div><!-- fragment --><p>The Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#a6ff6e74428d1422d8640841fb17fa618" title="Invoked when the Bluetooth reader returns the card status. ">bluetoothReader:didReturnCardStatus:error: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to return the card status.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didReturnCardStatus:(<a class="code" href="_a_b_t_bluetooth_reader_8h.html#aed0a7bbb969d091d95ae8934e56c7797">ABTBluetoothReaderCardStatus</a>)cardStatus error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Process the card status.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>If the card status is changed, the Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#ac2a01961e70c9100eea2e87fab5b3841" title="Invoked when the Bluetooth reader changes the card status. ">bluetoothReader:didChangeCardStatus:error: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to return the card status.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didChangeCardStatus:(<a class="code" href="_a_b_t_bluetooth_reader_8h.html#aed0a7bbb969d091d95ae8934e56c7797">ABTBluetoothReaderCardStatus</a>)cardStatus error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Process the card status.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="apdu"></a>
Transmitting the APDU</h1>
<p>If the Bluetooth reader is authenticated successfully, you can transmit the APDU to the card by calling <a class="el" href="interface_a_b_t_bluetooth_reader.html#a93385cc284f9839626018004ce54a9d3" title="Transmits the APDU. ">transmitApdu: (ABTBluetoothReader)</a> method of <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> class.</p>
<div class="fragment"><div class="line">[_bluetoothReader transmitApdu:_commandApdu];</div>
</div><!-- fragment --><p>The Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#a4b336811bf75ae71ece346266079afac" title="Invoked when the Bluetooth reader returns the response APDU. ">bluetoothReader:didReturnResponseApdu:error: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to return the response APDU.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didReturnResponseApdu:(NSData *)apdu error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Process the response APDU.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="escape"></a>
Transmitting the escape command</h1>
<p>If the Bluetooth reader is authenticated successfully, you can transmit the escape command by calling <a class="el" href="interface_a_b_t_bluetooth_reader.html#abccbcb0d14738a346827fd49364ea64e" title="Transmits the escape command. ">transmitEscapeCommand: (ABTBluetoothReader)</a> method of <a class="el" href="interface_a_b_t_bluetooth_reader.html" title="The ABTBluetoothReader class represents ACS Bluetooth readers. ">ABTBluetoothReader</a> class.</p>
<div class="fragment"><div class="line">[_bluetoothReader transmitEscapeCommand:_escapeCommand];</div>
</div><!-- fragment --><p>The Bluetooth reader calls <a class="el" href="protocol_a_b_t_bluetooth_reader_delegate-p.html#a7ca805709a1a60e04ec8eb215e503ef8" title="Invoked when the Bluetooth reader returns the escape response. ">bluetoothReader:didReturnEscapeResponse:error: (ABTBluetoothReaderDelegate-p)</a> method of its delegate object to return the escape response.</p>
<div class="fragment"><div class="line">- (void)bluetoothReader:(<a class="code" href="interface_a_b_t_bluetooth_reader.html">ABTBluetoothReader</a> *)bluetoothReader didReturnEscapeResponse:(NSData *)response error:(NSError *)error {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// TODO: Process the escape response.</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 29 2015 10:26:52 for ACS Bluetooth iOS/Mac OS X Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
